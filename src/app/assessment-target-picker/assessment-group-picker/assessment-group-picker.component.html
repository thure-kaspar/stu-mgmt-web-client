<ng-container *ngIf="(isLoading$ | async) == false">

	<table #tableGroups class="full-width" mat-table [dataSource]="dataSource" matSort #sortGroups="matSort">
		<!-- Action Column -->
		<ng-container matColumnDef="action">
			<th id="column-view" mat-header-cell *matHeaderCellDef></th>
			<td mat-cell *matCellDef="let row">
				<button *ngIf="!row.assessmentId" mat-stroked-button (click)="selectGroup(row.group)">{{ 'Action.Select' | translate }}</button>
				<button *ngIf="row.assessmentId" mat-stroked-button (click)="onSwitchToEdit.emit(row.assessmentId)">{{ 'Action.Edit' | translate }}</button>
			</td>
		</ng-container>
	
		<!-- Name Column -->
		<ng-container matColumnDef="name">
			<th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'Domain.Group' | translate }}</th>
			<td mat-cell *matCellDef="let row"> 
				<a class="link-none font-bold" [routerLink]="['/courses', courseId, 'groups', row.group.id]">{{row.group.name}}</a>
			</td>
		</ng-container>
	
		<!-- Assigned evaluator Column -->
		<ng-container matColumnDef="assignedTo">
			<th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'Common.AssignedTo' | translate }}</th>
			<td mat-cell *matCellDef="let row">
				<app-assessment-allocation 
					[courseId]="courseId" 
					[assignmentId]="assignmentId"
					[assignedTo]="row.assignedEvaluatorId"
					[groupId]="row.group.id">
				</app-assessment-allocation>
			</td>
		</ng-container>
	
		<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
		<tr mat-row [ngClass]="{'selected': row.group.id == selectedId }" *matRowDef="let row; columns: displayedColumns;">
		</tr>
	</table>

</ng-container>

<app-paginator (onPageChanged)="loadGroups()"></app-paginator>

<mat-progress-spinner class="center" mode="indeterminate" color="primary" *ngIf="isLoading$ | async"></mat-progress-spinner>
